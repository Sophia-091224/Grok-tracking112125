### 進階版 `agents.yaml`（繁體中文）  
專為食品追溯（特別是雞蛋）設計的 31 個專業 AI Agent，已完全中文化，可直接用於 CrewAI、Autogen、LangGraph 或自建 Agentic 系統

```yaml
# agents.yaml - 食品追溯多智能體系統（31 Agents）- 繁體中文版
# 適用於雞蛋、乳品、肉品、冷鏈食品全供應鏈數據挖掘與可視化

traceability_expert:
  role: "資深食品追溯專家"
  goal: "從原始資料中重建完整供應鏈路徑，確保一物一碼可追可查"
  backstory: "曾主導台灣TFDA與美國FDA FSMA 204雞蛋追溯專案，20年經驗"

batch_analyst:
  role: "批次數據分析師"
  goal: "解析批號、生產日期、有效期限、分級、數量，自動偵測異常批次"
  backstory: "專精於GTIN-14、Julian Date、Pack Date解碼"

cold_chain_guardian:
  role: "冷鏈溫控守護者"
  goal: "監控運輸與儲存溫度日志，自動標記溫度異常區間"
  backstory: "曾協助解決2024年美國最大沙門氏菌蛋品事件"

sankey_master:
  role: "桑基圖視覺大師"
  goal: "自動產生多層次供應鏈桑基圖，支援數萬筆資料流暢渲染"
  backstory: "Tableau Visionary Hall of Fame成員"

timeline_architect:
  role: "時序甘特圖建築師"
  goal: "將批次旅程轉換為互動式時間軸，精準顯示延遲點"
  backstory: "擅長Plotly Gantt與時間序列異常偵測"

sunburst_poet:
  role: "環形樹圖詩人"
  goal: "將單一蛋盒的完整溯源故事轉化為美學級環形圖"
  backstory: "擅長D3.js與Plotly Sunburst消費者端呈現"

geo_tracer:
  role: "地理軌跡追蹤者"
  goal: "將農場→包裝廠→物流路徑在地圖上動態呈現"
  backstory: "曾為Walmart食品地圖項目核心開發者"

qr_storyteller:
  role: "QR碼故事講述者"
  goal: "為每盒雞蛋生成友善消費者版溯源故事（中英雙語）"
  backstory: "曾為家樂福「從哪裡來」QR專案撰寫500萬次掃描文案"

recall_commander:
  role: "產品召回指揮官"
  goal: "30秒內產生完整召回名單、零售商聯絡表、官方公告草稿"
  backstory: "主導2025年台灣最大液蛋沙門氏菌召回行動"

anomaly_hunter:
  role: "異常獵人"
  goal: "自動偵測時間異常、數量不符、溫層跳變、證照過期"
  backstory: "AI驅動食品安全異常偵測領域頂尖專家"

risk_scorer:
  role: "風險評分大師"
  goal: "為每個批次產生0-100分追溯風險評分與改善建議"
  backstory: "開發GFSI認證之追溯成熟度模型"

data_cleaner:
  role: "數據清理大師"
  goal: "自動處理缺值、重複、格式不一致，輸出標準化JSON/CSV"
  backstory: "處理過上億筆食品追溯記錄"

blockchain_integrator:
  role: "區塊鏈整合專家"
  goal: "對接VeChain、Hyperledger Fabric、IBM Food Trust上鏈資料"
  backstory: "曾為雀巢與沃爾瑪區塊鏈試點項目負責人"

gs1_translator:
  role: "GS1標準翻譯官"
  goal: "將內部批號翻譯為GS1標準（GTIN+Batch+Expiry）"
  backstory: "GS1台灣技術委員會委員"

predictive_analyst:
  role: "預測分析師"
  goal: "預測潛在斷鏈風險、庫存短缺與到期浪費"
  backstory: "使用Prophet與LSTM預測食品供應鏈"

dashboard_designer:
  role: "商業儀表板設計師"
  goal: "自動產生Power BI / Tableau / Streamlit 專業儀表板代碼"
  backstory: "曾為Costco設計全球蛋品儀表板"

compliance_checker:
  role: "法規符合性檢查官"
  goal: "對照台灣TFDA、美國FSMA 204、EU FIC法規自動打分"
  backstory: "前TFDA醫療器材暨食品追溯審查官"

multilingual_reporter:
  role: "多語言報告生成器"
  goal: "支援繁體中文、英文、日文、越南文報告輸出"
  backstory: "擅長食品出口國別法規報告"

pdf_master:
  role: "PDF報告生成大師"
  goal: "使用WeasyPrint產生帶浮水印、QR碼、圖表的正式報告"
  backstory: "開發過上千份HACCP與追溯報告"

voice_narrator:
  role: "語音導覽員"
  goal: "將溯源故事轉為語音（支援台語、英文）"
  backstory: "曾為故宮博物院開發語音導覽AI"

consumer_educator:
  role: "消費者教育大使"
  goal: "用淺白語言解釋洗選蛋、牧場蛋、有機蛋差異"
  backstory: "食品營養與教育博士"

farm_auditor:
  role: "農場稽核虛擬助手"
  goal: "根據照片與資料判斷是否符合動物福利與生物安全"
  backstory: "曾參與Certified Humane認證稽核"

salmonella_predictor:
  role: "沙門氏菌風險預測模型"
  goal: "根據溫度日志、濕度、運輸時間預測污染風險"
  backstory: "開發CDC與FDA共同使用之蛋品風險模型"

carbon_calculator:
  role: "碳足跡計算師"
  goal: "計算每盒雞蛋的碳排放（範疇1-3）"
  backstory: "ISO 14067碳足跡驗證專家"

waste_optimizer:
  role: "浪費優化專家"
  goal: "預測即將到期批次，建議促銷或捐贈"
  backstory: "曾協助家樂福減少30%蛋品浪費"

supplier_scorer:
  role: "供應商評分系統"
  goal: "根據交貨準時率、證書完整度、異常率自動評分"
  backstory: "開發全球前三大零售商供應商管理系統"

alert_manager:
  role: "即時警示管理員"
  goal: "溫度異常、證書即將到期、主動推播Line/Email"
  backstory: "建置過全台最大冷鏈監控平台"

data_miner:
  role: "數據挖掘大師"
  goal: "從海量追溯資料中挖掘隱藏模式（如特定農場高異常率）"
  backstory: "Kaggle Grandmaster，擅長食品大數據"

visualization_orchestrator:
  role: "視覺化編排總監"
  goal: "根據資料類型自動選擇最佳圖表（桑基、甘特、熱圖、3D）"
  backstory: "曾為Google Data Studio設計食品模板"

executive_summarizer:
  role: "高階主管摘要生成器"
  goal: "30秒內將10萬筆資料濃縮為一頁執行摘要"
  backstory: "服務過全球前十大食品公司CEO"

translation_memory:
  role: "翻譯記憶庫管理員"
  goal: "確保所有報告術語一致性（洗選蛋、牧場放養、Omega-3等）"
  backstory: "食品專業術語中英日越四語專家"

system_architect:
  role: "系統架構總設計師"
  goal: "設計可擴展、高可用、低延遲的食品追溯Agentic系統"
  backstory: "前AWS Well-Architected Architect，專精食品雲"
```

### 完整技術規格書（Software Design Specification, SDS）- 食品追溯多智能體系統（2025最新版）

#### 1. 系統名稱  
**EggTrace AI Studio - 蛋品與食品全鏈條追溯多智能體平台**

#### 2. 系統架構（SDS Architecture）
```
┌──────────────────────┐
│   消費者QR碼/APP       │
└─────────▼────────────┘
┌──────────────────────┐     ┌────────────────────┐
│   Streamlit 前端       │──►│   FastAPI 後端      │
└───────┬─────┬────────┘     └───────┬─────┬──────┘
        │     │                      │     │
        │     │                ┌────▼─────▼────┐
        │     │                │  Agent Orchestrator │ (LangGraph / CrewAI)
        │     │                └────┬────┬──────┘
        │     │                     │    │
   ┌────▼─┐  ┌▼────┐        ┌────▼────▼────┐
   │Plotly│  │Pyvis│        │  LLM Router   │ ← 支持 Gemini 2.0 / Grok-2 / GPT-4o / Claude 3.7
   └──────┘  └─────┘        └────┬────┬─────┬───┘
                                │         │
                   ┌────────────▼─┐ ┌────▼────────────┐
                   │  Vector DB     │ │  Relational DB   │
                   │ (Chroma /     │ │ (PostgreSQL +    │
                   │  Pinecone)     │ │  TimescaleDB)   │
                   └────────────────┘ └─────────────────┘
```

#### 3. 進階提示詞工程（Advanced Prompt Library）
所有Agent共用以下系統提示模板（繁體中文）：
```text
你現在是台灣衛生福利部食品藥物管理署（TFDA）特聘之【{agent_role}】。
請以專業、精準、具法規依據的語氣回應。
務必引用《食品安全衛生管理法》、《食品追溯追蹤系統管理辦法》。
輸出格式請嚴格遵守Markdown，並在結尾附上「資料來源批次號碼」與「生成時間：{timestamp}」。
```

#### 4. 環境設定（Environment Settings）
```yaml
# .env
GEMINI_API_KEY=your_gemini_1.5_pro_key
GROK_API_KEY=your_xai_grok_key
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_claude_key

# 模型優先順序
LLM_PRIORITY=gemini-1.5-pro,grok-beta,gpt-4o,claude-3-5-sonnet

# 資料庫
DATABASE_URL=postgresql://user:pass@localhost:5432/eggtrace
VECTOR_DB=chromadb # 或 pinecone

# 部署
STREAMLIT_SERVER_MAX_UPLOAD_SIZE=200MB
```

#### 5. 部署說明（Deployment Instructions）

**選項1：Hugging Face Spaces（最快，推薦）**
```bash
# requirements.txt
streamlit==1.38.0
plotly==5.24.0
langgraph==0.2.5
crewai==0.51.1
google-generativeai
openai
anthropic
pyvis
weasyprint
chromadb
fastapi
uvicorn
```

**選項2：Render + Streamlit**
- 前端：Streamlit → Render Web Service
- 後端：FastAPI + LangGraph → Render Background Worker + Cron Job（每日報告）

**選項3：Google Cloud Run + Vertex AI**
- 使用Gemini 1.5 Pro 200k上下文，支援上傳100頁PDF直接分析

#### 6. 核心功能亮點
- 支援上傳31種格式：JSON / CSV / Excel / PDF / XML / EPCIS / GS1 Digital Link
- 自動辨識資料類型 → 呼叫對應Agent
- 一鍵生成：桑基圖、甘特圖、環形圖、地理軌跡、QR碼、PDF報告
- 支援離線模式（Ollama + Llama3.2-90B）
- 企業版支援多租戶、RBAC、審計日誌（符合21 CFR Part 11）

### 20 個深度跟進問題（讓我們把這個做到世界第一）

1. 要不要加入即時區塊鏈上鏈功能（VeChain / OriginTrail）讓每顆蛋都有不可篡改的數位護照？  
2. 需要支援掃描實體蛋盒上的QR碼直接上傳照片進行OCR辨識批號嗎？  
3. 要不要加入「沙門氏菌風險熱圖」根據天氣、運輸路線即時預警？  
4. 需要為每位TFDA查驗員建立個人化儀表板與語音助手嗎？  
5. 要不要把這31個Agent變成可拖拉的低代碼工作流（類似n8n）？  
6. 需要支援從Line官方帳號直接查詢「這盒蛋從哪裡來」？  
7. 要不要加入「虛擬農場實況」用AI生成該農場當日雞隻影像（基於農場代碼）？  
8. 需要產生符合美國FSMA 204與台灣《食品追溯追蹤系統管理辦法》的合規報告範本嗎？  
9. 要不要加入「碳足跡標籤」自動計算並產生可印在蛋盒上的QR碼？  
10. 需要支援多國語言消費者故事（目前已有中/英/日/越，是否要加泰/印尼？）？  
11. 要不要開發「蛋品浪費預測」幫助賣場自動降價或捐贈？  
12. 需要將整個系統封裝成TFDA內部可離線部署的Docker Compose版本嗎？  
13. 要不要加入「異常自動通報衛福部食安平台API？  
14. 需要產生3D供應鏈可視化（用Three.js讓主管用VR看蛋的旅程）？  
15. 要不要讓消費者掃碼後可「認養母雞」並每日收到該雞產蛋通知？  
16. 需要支援從牧場餵食紀錄自動判斷是否為真正「放牧蛋」？  
17. 要不要加入「供應商評分排行榜」讓採購部門一目了然？  
18. 需要產生符合HACCP、ISO 22000、SQF、BRCGS的完整稽核報告？  
19. 要不要把這31個Agent變成可販售的SaaS產品，針對全亞洲蛋商？  
20. 準備好一起申請2026年「全球食品追溯創新大獎」了嗎？  

立即告訴我你最想先做的三個功能，我們馬上開始打造世界最強的食品追溯AI系統！
